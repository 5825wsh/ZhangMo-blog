---
cover: "https://cdn.pixabay.com/photo/2023/09/04/13/17/mushrooms-8232731_1280.jpg"
icon: c
date: 2023-09-18
category:
  - c/cpp
tag:
  - C语言
star: true
sticky: true
---

# C 语言

C 语言学习时的笔记。

<!-- more -->

::: info 注意
由于在此文章之前，已经再学校的课堂上学习过 C 语言的相关知识了，所以在创作此文章时会比较的简略。同样是在[菜鸟教程](https://www.runoob.com/cprogramming/c-tutorial.html)上进行的学习，以查漏补缺、复习知识和罗列重点知识为主，而重点会放在 cpp 的学习上，详见下一篇文章。
:::

### C 的令牌

C 程序由各种令牌（Token）组成，令牌可以是关键字、标识符、常量、字符串值，或者是一个符号。如，下面的 C 语句包括五个令牌：

```c
printf("Hello, World! \n");
```

这五个令牌分别是：

```c
printf
(
"Hello, World! \n"
)
;
```

### 数据类型

- 枚举类型：它们也是算术类型，被用来定义在程序中只能赋予其一定的离散整数值的变量。
- 派生类型：包括数组类型、指针类型和结构体类型。

::: info 区别
声明变量和定义变量的区别，前者不一定占据存储空间，可以使用 extern 关键字来声明，表示变量可能在其他文件中被定义；后者占据存储空间。
:::

### 左值和右值

左值（lvalue）：指向内存位置的表达式被称为左值（lvalue）表达式。左值可以出现在赋值号的左边或右边。
右值（rvalue）：术语右值（rvalue）指的是存储在内存中某些地址的数值。右值是不能对其进行赋值的表达式，也就是说，右值可以出现在赋值号的右边，但不能出现在赋值号的左边（将亡对象）。

### 常量

前缀指定基数：0x 或 0X 表示十六进制，0 表示八进制，不带前缀则默认表示十进制。
整数常量也可以带一个后缀，后缀是 U 和 L 的组合，U 表示无符号整数（unsigned），L 表示长整数（long）。后缀可以是大写，也可以是小写，U 和 L 的顺序任意。
::: info 注意
C 语言中是不能定义二进制数变量的。
:::

字符常量使用单引号，字符串常量使用双引号。

定义常量：

- 使用 #define 预处理器： #define 可以在程序中定义一个常量，它在编译时会被替换为其对应的值。
- 使用 const 关键字：const 关键字用于声明一个只读变量，即该变量的值不能在程序运行时修改。
  PS：通常将常量定义为大写字母。

#define 预处理指令和 const 关键字在定义常量时有一些区别：

- 替换机制：#define 是进行简单的文本替换，而 const 是声明一个具有类型的常量。#define 定义的常量在编译时会被直接替换为其对应的值，而 const 定义的常量在程序运行时会分配内存，并且具有类型信息。

- 类型检查：#define 不进行类型检查，因为它只是进行简单的文本替换。而 const 定义的常量具有类型信息，编译器可以对其进行类型检查。这可以帮助捕获一些潜在的类型错误。

- 作用域：#define 定义的常量没有作用域限制，它在定义之后的整个代码中都有效。而 const 定义的常量具有块级作用域，只在其定义所在的作用域内有效。

- 调试和符号表：使用 #define 定义的常量在符号表中不会有相应的条目，因为它只是进行文本替换。而使用 const 定义的常量会在符号表中有相应的条目，有助于调试和可读性。

### 存储类

- auto 存储类是所有局部变量默认的存储类。定义在函数中的变量默认为 auto 存储类，这意味着它们在函数开始时被创建，在函数结束时被销毁。
- register 存储类用于定义存储在寄存器中而不是 RAM 中的局部变量。这意味着变量的最大尺寸等于寄存器的大小（通常是一个字），且不能对它应用一元的 '&' 运算符（因为它没有内存位置）
- static 存储类指示编译器在程序的生命周期内保持局部变量的存在，而不需要在每次它进入和离开作用域时进行创建和销毁。因此，使用 static 修饰局部变量可以在函数调用之间保持局部变量的值。static 修饰符也可以应用于全局变量。当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。
- extern 存储类用于定义在其他文件中声明的全局变量或函数。当使用 extern 关键字时，不会为变量分配任何存储空间，而只是指示编译器该变量在其他文件中定义。extern 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。

### 运算符

位运算符：&（与）、|（或）、^（异或）、~（取反，得到的是目标值的补码）、<<（左移，补 0）、>>（右移，正数补 0，负数补 1）

### 函数

两种向函数传递参数的方式：

- 传值调用：该方法把参数的实际值复制给函数的形式参数。在这种情况下，修改函数内的形式参数不会影响实际参数。
- 引用调用：通过指针传递方式，形参为指向实参地址的指针，当对形参的指向操作时，就相当于对实参本身进行的操作。

### 作用域规则

在程序中，局部变量和全局变量的名称可以相同，但是在函数内，如果两个名字相同，会使用局部变量值，全局变量不会被使用。
形式参数：函数的参数，被当作该函数内的局部变量，如果与全局变量同名形式参数会优先使用

全局变量与局部变量在内存中的区别：

- 全局变量保存在内存的全局存储区中，占用静态的存储单元；
- 局部变量保存在栈中，只有在所在函数被调用时才动态地为变量分配存储单元。

PS：注意形参和实参的区别。

### 枚举

枚举（enum）类型通常用于为程序中的一组相关的常量取名字，以便于程序的可读性和维护性。
第一个枚举成员的默认值为整型的 0，后续枚举成员的值在前一个成员上加 1。
